(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},22:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(16),o=n.n(l),u=(n(22),n(2)),c=n.n(u),s=n(4),i=n(3),g=function(e){var t=e.blog;return r.a.createElement("li",{className:"blog"},"Title: ",t.title,", Author: ",t.author)},p=n(6),m=function(e){var t=e.message,n=e.style,a={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},l=Object(p.a)({},a,{color:"green"}),o=Object(p.a)({},a,{color:"blue"}),u="success"===n?l:"error"===n?a:o;return null===t?null:r.a.createElement("div",{style:u},t)},d=function(e){return r.a.createElement("form",{onSubmit:e.handleLogin},r.a.createElement("h3",null,"Log in to Blog App"),r.a.createElement("div",null,"Username:",r.a.createElement("input",{type:"text",value:e.username,name:"Username",onChange:function(t){var n=t.target;return e.setUsername(n.value)}})),r.a.createElement("div",null,"Password:",r.a.createElement("input",{type:"password",value:e.password,name:"Password",onChange:function(t){var n=t.target;return e.setPassword(n.value)}})),r.a.createElement("button",{className:"btn",type:"submit"},"Login"))},f=function(e){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h3",null,"Add New Blog:"),r.a.createElement("form",{onSubmit:e.addBlog},r.a.createElement("div",null,"Title:",r.a.createElement("input",{type:"text",value:e.blogTitle,name:"BlogTitle",onChange:e.handleTitleChange})),r.a.createElement("div",null,"Author:",r.a.createElement("input",{type:"text",value:e.blogAuthor,name:"BlogAuthor",onChange:e.handleAuthorChange})),r.a.createElement("div",null,"URL:",r.a.createElement("input",{type:"text",value:e.blogUrl,name:"BlogUrl",onChange:e.handleUrlChange})),r.a.createElement("button",{type:"submit"},"Save Blog")))},b=n(5),v=n.n(b),h=null,E={getAll:function(){return v.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,v.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){h="bearer ".concat(e)}},w={login:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),p=u[0],b=u[1],v=Object(a.useState)(""),h=Object(i.a)(v,2),O=h[0],j=h[1],x=Object(a.useState)(null),y=Object(i.a)(x,2),S=y[0],A=y[1],k=Object(a.useState)(null),B=Object(i.a)(k,2),U=B[0],C=B[1],T=Object(a.useState)("success"),L=Object(i.a)(T,2),N=L[0],I=L[1],J=Object(a.useState)(""),P=Object(i.a)(J,2),D=P[0],z=P[1],R=Object(a.useState)(""),q=Object(i.a)(R,2),F=q[0],G=q[1],H=Object(a.useState)(""),K=Object(i.a)(H,2),M=K[0],Q=K[1];Object(a.useEffect)((function(){(function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getAll();case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);A(t),E.setToken(t.token)}}),[]);var V=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.login({username:p,password:O});case 4:n=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(n)),E.setToken(n.token),A(n),b(""),j(""),X("success","Logged in succesfully!",5e3),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),X("error","Login failed: Incorrect credentials",5e3);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={title:D,author:F,url:M},e.next=4,E.create(a);case 4:r=e.sent,l(n.concat(r)),X("success",'New blog with title "'.concat(D,'" added!'),5e3),G(""),Q(""),z("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e,t,n){I(e),C(t),Y(n)},Y=function(e){return setTimeout((function(){C(null)}),e)};return r.a.createElement("div",{className:"boxDiv"},r.a.createElement("h1",null,"Blog App"),r.a.createElement(m,{message:U,style:N}),null===S?r.a.createElement("div",null,r.a.createElement(d,{handleLogin:function(e){return V(e)},username:p,password:O,setUsername:b,setPassword:j})):r.a.createElement("div",null,r.a.createElement("p",null,"Logged in as ",S.name),r.a.createElement("button",{onClick:function(){return window.localStorage.removeItem("loggedBlogAppUser"),void window.location.reload()}},"Log Out"),r.a.createElement(f,{addBlog:W,blogTitle:D,blogAuthor:F,blogUrl:M,handleTitleChange:function(e){return function(e){z(e.target.value)}(e)},handleAuthorChange:function(e){return function(e){G(e.target.value)}(e)},handleUrlChange:function(e){return function(e){Q(e.target.value)}(e)}}),r.a.createElement("h3",null,"All Blogs:"),r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(g,{key:e.id,blog:e})})))))};o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.5a7a6ce4.chunk.js.map